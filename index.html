<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Fix header/logo appearing faded behind 3D background */
        canvas, #three-background, #threejs-bg {
            z-index: 0 !important;
            position: fixed !important;
            top: 0;
            left: 0;
        }

        #header {
            position: sticky;
            top: 0;
            z-index: 50 !important;
        }

        #header * {
            position: relative;
            z-index: 51 !important;
            opacity: 1 !important;
        }

        main {
            position: relative;
            z-index: 10 !important;
        }

        /* âœ¨ Smooth Toast Animation */
        #toast {
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.4s ease;
        }

        #toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* ðŸ§± Fix cart drawer layering */
        #cart-drawer {
            z-index: 9999 !important;
            background-color: white;
        }

        /* ðŸ§± Fix checkout modal layering */
        #checkout-modal {
            z-index: 10000 !important;
        }

        /* ðŸ§± Prevent main background interference when drawer is open */
        body.drawer-open main {
            filter: blur(3px);
            pointer-events: none;
            user-select: none;
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: #374151;
            background-color: #ffffff;
        }

        /* Custom Styles */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .scroll-fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .scroll-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* FIXED: Enhanced Product Card Hover Effects */
        .product-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 8px;
            padding: 2px;
            background: linear-gradient(135deg, #f97316, #0ea5e9, #8b5cf6);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 20px 25px -5px rgba(249, 115, 22, 0.3),
                0 10px 10px -5px rgba(249, 115, 22, 0.2),
                0 0 30px rgba(14, 165, 233, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .product-card:hover::before {
            opacity: 1;
        }

        /* Custom Logo Styling */
        .half-color-t {
            background-image: linear-gradient(to right, #111827 50%, #38bdf8 50%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            display: inline-block;
            font-weight: 900;
        }

        .half-color-t-dark {
            background-image: linear-gradient(to right, #f3f4f6 50%, #7dd3fc 50%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            display: inline-block;
            font-weight: 900;
        }

        .header-scrolled {
            background-color: rgba(255, 255, 255, 0.5) !important;
            backdrop-filter: blur(12px) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .toast-enter {
            animation: toastIn 0.3s forwards;
            opacity: 0;
            transform: translateX(100%);
        }
        @keyframes toastIn {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .modal-backdrop {
            background-color: rgba(17, 24, 39, 0.85);
        }

        .full-page-content {
            min-height: calc(100vh - 80px);
        }

        /* Utility Classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-primary {
            background-color: #f97316;
            color: white;
        }

        .btn-primary:hover {
            background-color: #ea580c;
            transform: scale(1.05);
        }

        .btn-secondary {
            background-color: #0ea5e9;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #0284c7;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

        @media (min-width: 768px) {
            .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
            .md\:flex { display: flex; }
            .md\:hidden { display: none; }
        }

        @media (min-width: 1024px) {
            .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #0ea5e9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #0284c7;
        }

        /* NEW: Trusted Sites Dropdown Styles */
        .trusted-sites-dropdown {
            position: relative;
        }

        .trusted-sites-button {
            transition: all 0.3s ease-in-out;
        }

        .trusted-sites-button.rotated svg {
            transform: rotate(180deg);
        }

        .trusted-sites-dropdown-content {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }

        .trusted-sites-dropdown-content.open {
            max-height: 200px;
            opacity: 1;
        }

        .trusted-sites-link {
            transition: all 0.2s ease-in-out;
        }

        .trusted-sites-link:hover {
            transform: translateX(4px);
            background-color: #f8fafc;
        }

        /* Flying Animation Styles */
        .flying-item {
            pointer-events: none;
        }

        .flying-item-content {
            position: relative;
            width: 60px;
            height: 60px;
        }

        .flying-item-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
            border: 2px solid #f97316;
            box-shadow: 0 8px 25px rgba(249, 115, 22, 0.4);
        }

        .flying-item-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(249, 115, 22, 0.6) 0%, rgba(249, 115, 22, 0) 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulseGlow 0.8s ease-out;
        }

        @keyframes pulseGlow {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        /* Cart Bounce Animation */
        .cart-bounce {
            animation: cartBounce 0.3s ease-in-out;
        }

        @keyframes cartBounce {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        /* Enhanced Toast Animations */
        @keyframes slideInBounce {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }
            60% {
                transform: translateX(-10px);
                opacity: 1;
            }
            80% {
                transform: translateX(5px);
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Add to Cart Button Animation */
        .add-to-cart-btn:active {
            transform: scale(0.95);
        }

        /* Success Checkmark Animation */
        .success-check {
            animation: checkmark 0.5s ease-in-out;
        }

        @keyframes checkmark {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Enhanced Toast Styling */
        #toast {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            border-color: #34d399;
            box-shadow: 0 10px 25px rgba(5, 150, 105, 0.3);
        }

        /* NEW: Skeleton Loading Styles */
        .skeleton {
            background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 0.375rem;
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        .skeleton-hero-title {
            height: 4rem;
            width: 80%;
            margin: 0 auto 1.5rem;
        }

        .skeleton-hero-subtitle {
            height: 1.5rem;
            width: 60%;
            margin: 0 auto 2.5rem;
        }

        .skeleton-hero-button {
            height: 3.5rem;
            width: 12rem;
            margin: 0 auto;
            border-radius: 9999px;
        }

        .skeleton-section-title {
            height: 3rem;
            width: 50%;
            margin-bottom: 1rem;
        }

        .skeleton-section-subtitle {
            height: 1.25rem;
            width: 70%;
            margin-bottom: 3rem;
        }

        .skeleton-text {
            height: 1rem;
            margin-bottom: 0.75rem;
        }

        .skeleton-text.short {
            width: 40%;
        }

        .skeleton-text.medium {
            width: 70%;
        }

        .skeleton-text.long {
            width: 90%;
        }

        .skeleton-image {
            height: 12rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
        }

        .skeleton-price {
            height: 2rem;
            width: 40%;
            margin-bottom: 1rem;
        }

        .skeleton-button {
            height: 3rem;
            border-radius: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .skeleton-button-small {
            height: 2.5rem;
            border-radius: 0.75rem;
        }

        .skeleton-feature-icon {
            width: 2rem;
            height: 2rem;
            border-radius: 0.5rem;
            margin-right: 1rem;
        }

        .skeleton-feature-text {
            flex: 1;
        }

        .skeleton-contact-input {
            height: 3rem;
            margin-bottom: 1.5rem;
            border-radius: 0.5rem;
        }

        .skeleton-contact-textarea {
            height: 8rem;
            margin-bottom: 1.5rem;
            border-radius: 0.5rem;
        }

        .skeleton-contact-button {
            height: 3rem;
            border-radius: 0.5rem;
        }

        .content-fade-in {
            animation: contentFadeIn 0.6s ease-out forwards;
        }
        
        /* Amazon-like Product Grid for Mobile */
        .products-grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(2, 1fr);
        }

        .product-image-container {
            height: 140px;
            background: #f9fafb;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .product-card:hover .product-image-container {
            transform: scale(1.05);
            background: linear-gradient(135deg, #fef3e2, #f0f9ff);
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 4px;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-category {
            font-size: 0.7rem;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 4px;
            transition: color 0.3s ease;
        }

        .product-card:hover .product-category {
            color: #f97316;
        }

        .product-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1f2937;
            line-height: 1.3;
            margin-bottom: 6px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 2.6em;
            transition: color 0.3s ease;
        }

        .product-card:hover .product-title {
            color: #0ea5e9;
        }

        /* FIXED: Read More Functionality */
        .product-description {
            font-size: 0.75rem;
            color: #6b7280;
            line-height: 1.3;
            margin-bottom: 8px;
            position: relative;
            transition: color 0.3s ease;
            overflow: hidden;
        }

        .product-description.collapsed {
            max-height: 2.6em;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-description.expanded {
            max-height: none;
            display: block;
            -webkit-line-clamp: unset;
        }

        .read-more-btn {
            background: none;
            border: none;
            color: #0ea5e9;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            padding: 0;
            margin-top: 4px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .read-more-btn:hover {
            color: #0284c7;
            text-decoration: underline;
            transform: translateX(2px);
        }

        .read-more-btn.hidden {
            display: none;
        }

        .product-price {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
            transition: color 0.3s ease;
        }

        .product-card:hover .product-price {
            color: #f97316;
        }

        .product-actions {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .add-to-cart-btn-mobile {
            width: 100%;
            padding: 8px 12px;
            background: #f97316;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .add-to-cart-btn-mobile::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .add-to-cart-btn-mobile:hover {
            background: #ea580c;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
        }

        .add-to-cart-btn-mobile:hover::before {
            left: 100%;
        }

        .trusted-sites-button-mobile {
            width: 100%;
            padding: 6px 10px;
            background: #f9fafb;
            color: #374151;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .trusted-sites-button-mobile:hover {
            background: #f3f4f6;
            border-color: #0ea5e9;
            color: #0ea5e9;
        }

        /* Responsive grid */
        @media (min-width: 640px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }
            
            .product-card {
                padding: 16px;
            }
            
            .product-image-container {
                height: 160px;
            }
        }

        @media (min-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 1.5rem;
            }
            
            .product-card {
                padding: 20px;
            }
            
            .product-image-container {
                height: 180px;
            }
            
            .product-title {
                font-size: 1rem;
            }
            
            .product-description {
                font-size: 0.875rem;
            }
            
            .add-to-cart-btn-mobile {
                padding: 10px 16px;
                font-size: 0.875rem;
            }
        }

        @keyframes contentFadeIn {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

            /* Fix Three.js overlay on footer */
            #three-background {
                z-index: 0 !important;
            }

            footer {
                position: relative;
                z-index: 20 !important;
            }

            footer * {
                position: relative;
                z-index: 21 !important;
            }  

        /* NEW: Modern Footer Styles */
        .footer {
            position: relative;
            z-index: 20 !important;
            background-color: #2e2d2d !important;
            padding: 20px 0 10px 0;
        }

        .footer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 25px 40px 15px 40px;
            background-color: #2e2d2d;
            border-top: 1px solid #444;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
        }

        .footer-main-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 20px;
        }

        .footer-links {
            display: flex;
            align-items: center;
        }

        .footer-links a {
            margin: 0 25px;
            color: #c8ced8;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #86ebcc;
        }

        .social-icons {
            display: flex;
            align-items: center;
        }

        .social-icons a {
            margin: 0 20px;
        }

        .social-icons a img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .social-icons a img:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .footer-copyright {
            text-align: center;
            color: #9ca3af;
            font-size: 0.875rem;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #444;
            width: 100%;
        }

        @media (max-width: 640px) {
            .footer-main-content {
                flex-direction: column;
                gap: 25px;
            }
            
            .footer-links a {
                margin: 0 15px;
            }
            
            .social-icons a {
                margin: 0 15px;
            }
        }
        
        /* Product Detail Modal Styles */
        .product-detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            overflow-y: auto;
            padding: 20px;
        }

        .product-detail-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .product-detail-content {
            background-color: white;
            border-radius: 12px;
            width: 95%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .product-detail-modal.active .product-detail-content {
            transform: translateY(0);
        }

        .product-detail-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s ease;
        }

        .product-detail-close:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }

        .product-detail-body {
            display: flex;
            flex-direction: column;
            padding: 30px;
        }

        @media (min-width: 768px) {
            .product-detail-body {
                flex-direction: row;
            }
        }

        .product-detail-image-section {
            flex: 1;
            padding-right: 0;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .product-detail-image-section {
                padding-right: 30px;
                margin-bottom: 0;
            }
        }

        .product-detail-main-image {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 8px;
            margin: 0 auto 15px;
            display: block;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .product-detail-info-section {
            flex: 1;
        }

        .product-detail-category {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .product-detail-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 15px;
            line-height: 1.3;
        }

        @media (min-width: 768px) {
            .product-detail-title {
                font-size: 1.75rem;
            }
        }

        .product-detail-price {
            font-size: 1.75rem;
            font-weight: 800;
            color: #f97316;
            margin-bottom: 15px;
        }

        .product-detail-description {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .product-detail-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 25px;
        }

        @media (min-width: 480px) {
            .product-detail-actions {
                flex-direction: row;
            }
        }

        .product-detail-add-to-cart {
            background: #f97316;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-detail-add-to-cart:hover {
            background: #ea580c;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
        }

        .product-detail-buy-now {
            background: #0ea5e9;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-detail-buy-now:hover {
            background: #0284c7;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
        }

        .product-detail-features {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }

        .product-detail-features h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 15px;
        }

        .product-detail-features ul {
            list-style-type: none;
            padding-left: 0;
        }

        .product-detail-features li {
            padding: 8px 0;
            color: #4b5563;
            display: flex;
            align-items: flex-start;
        }

        .product-detail-features li:before {
            content: "âœ“";
            color: #10b981;
            font-weight: bold;
            margin-right: 10px;
        }

        /* Similar Products Section */
        .similar-products-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e5e7eb;
        }

        .similar-products-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
            text-align: center;
        }

        .similar-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .similar-product-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .similar-product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .similar-product-image {
            width: 100%;
            height: 120px;
            object-fit: contain;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .similar-product-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 2.5em;
        }

        .similar-product-price {
            font-size: 1rem;
            font-weight: 700;
            color: #f97316;
        }
        /* Legal Modal Styles */
.legal-content {
    line-height: 1.6;
    color: #374151;
}

.legal-content h3 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
    margin: 2rem 0 1rem 0;
    border-bottom: 2px solid #e5e7eb;
    padding-bottom: 0.5rem;
}

.legal-content h4 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #374151;
    margin: 1.5rem 0 0.75rem 0;
}

.legal-content p {
    margin-bottom: 1rem;
}

.legal-content ul, .legal-content ol {
    margin: 1rem 0;
    padding-left: 1.5rem;
}

.legal-content li {
    margin-bottom: 0.5rem;
}

.legal-content strong {
    font-weight: 600;
    color: #1f2937;
}

/* Fix for products grid visibility */
#products-grid {
    min-height: 400px;
    position: relative;
}

/* Loading states */
.loading {
    opacity: 0.7;
    pointer-events: none;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 40px;
    height: 40px;
    margin: -20px 0 0 -20px;
    border: 4px solid #f3f4f6;
    border-top: 4px solid #0ea5e9;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
    </style>

    <!-- Google Font (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- AOS (scroll animations, optional if Gemini used it) -->
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        // Initialize AOS safely
        if (typeof AOS !== 'undefined') {
            AOS.init();
        }
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoboTechnique - Premium Robotics & IoT Shop</title>
    <link rel="icon" href="logo.jpg">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Three.js Background -->
    <div id="three-background" class="fixed top-0 left-0 w-full h-full z-0 pointer-events-none opacity-90" style="background-color: #f9fafb;"></div>

    <!-- Cart Drawer -->
    <div id="cart-drawer" class="fixed top-0 right-0 h-full w-full sm:w-96 bg-white shadow-2xl z-70 transition-transform duration-400 ease-out flex flex-col translate-x-full">
        <!-- Cart content will be inserted here by JavaScript -->
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="fixed inset-0 z-80 flex items-center justify-center modal-backdrop transition-opacity duration-300 hidden">
        <!-- Modal content will be inserted here by JavaScript -->
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-20 right-6 z-[60] p-4 bg-sky-600 text-white rounded-xl shadow-2xl flex items-center space-x-3 border-b-4 border-orange-300 hidden">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap w-5 h-5 animate-pulse"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg>
        <span class="font-semibold">Item added to cart!</span>
    </div>

    <!-- Product Detail Modal -->
    <div id="product-detail-modal" class="product-detail-modal">
        <div class="product-detail-content">
            <button id="product-detail-close" class="product-detail-close">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
            <div class="product-detail-body">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <header id="header" class="sticky top-0 bg-white/50 backdrop-blur-md shadow-lg z-50 transition-all duration-300">
        <nav class="container">
            <div class="flex justify-between items-center h-20">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <div class="h-14 w-14 flex items-center justify-center">
                        <img src="./logo.jpg" alt="RoboTechnique Logo" class="h-12 w-auto object-contain" onerror="this.style.display='none'">
                    </div>
                    <a href="#" class="text-3xl font-extrabold tracking-tight">
                        <span class="text-gray-900">Robo</span><span class="half-color-t">T</span><span class="text-sky-500">echnique</span>
                    </a>
                </div>

                <!-- Navigation Links & Cart Container -->
                <div class="flex items-center">
                    <!-- Navigation Links -->
                    <div class="hidden md:flex space-x-16 mr-12">
                        <a href="#home" class="text-gray-600 hover:text-sky-600 transition duration-150 font-medium py-1 border-b-2 border-transparent hover:border-sky-500">Home</a>
                        <a href="#shop" class="text-gray-600 hover:text-sky-600 transition duration-150 font-medium py-1 border-b-2 border-transparent hover:border-sky-500">Shop</a>
                        <a href="#brand" class="text-gray-600 hover:text-sky-600 transition duration-150 font-medium py-1 border-b-2 border-transparent hover:border-sky-500">Brand</a>
                        <a href="#contact" class="text-gray-600 hover:text-sky-600 transition duration-150 font-medium py-1 border-b-2 border-transparent hover:border-sky-500">Contact</a>
                    </div>

                    <!-- Cart & Mobile Menu -->
                    <div class="flex items-center space-x-4">
                        <button id="cart-button" class="relative p-2 rounded-full text-gray-600 hover:text-orange-500 transition duration-200">
                            <i data-lucide="shopping-cart" class="h-7 w-7"></i>
                            <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-orange-500 rounded-full hidden">0</span>
                        </button>

                        <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-600 hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-orange-500">
                            <i data-lucide="menu" class="h-6 w-6"></i>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden absolute w-full bg-white/80 backdrop-blur-md shadow-xl transition-all duration-300 h-0 opacity-0 overflow-hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="block px-3 py-2 rounded-lg text-base font-medium text-gray-700 hover:bg-sky-50 hover:text-sky-600 transition duration-150">Home</a>
                <a href="#shop" class="block px-3 py-2 rounded-lg text-base font-medium text-gray-700 hover:bg-sky-50 hover:text-sky-600 transition duration-150">Shop</a>
                <a href="#brand" class="block px-3 py-2 rounded-lg text-base font-medium text-gray-700 hover:bg-sky-50 hover:text-sky-600 transition duration-150">Brand</a>
                <a href="#contact" class="block px-3 py-2 rounded-lg text-base font-medium text-gray-700 hover:bg-sky-50 hover:text-sky-600 transition duration-150">Contact</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="relative z-10 full-page-content">
        <!-- Hero Section -->
        <section id="home" class="pt-24 pb-32 sm:pt-32 sm:pb-48 container text-center">
            <div id="hero-content">
                <!-- Skeleton will be shown initially, then replaced with real content -->
                <div class="skeleton skeleton-hero-title"></div>
                <div class="skeleton skeleton-hero-subtitle"></div>
                <div class="skeleton skeleton-hero-button"></div>
            </div>
        </section>
        
        <!-- About/Brand Section -->
        <section id="brand" class="py-20 sm:py-32">
            <div class="container">
                <div id="brand-content">
                    <div class="lg:flex lg:space-x-12">
                        <div class="lg:w-1/2">
                            <div class="skeleton skeleton-section-title"></div>
                        </div>
                        <div class="lg:w-1/2 mt-8 lg:mt-0 space-y-8">
                            <div class="flex items-start space-x-4">
                                <div class="skeleton skeleton-feature-icon"></div>
                                <div class="skeleton-feature-text">
                                    <div class="skeleton skeleton-text short mb-2"></div>
                                    <div class="skeleton skeleton-text long"></div>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="skeleton skeleton-feature-icon"></div>
                                <div class="skeleton-feature-text">
                                    <div class="skeleton skeleton-text short mb-2"></div>
                                    <div class="skeleton skeleton-text long"></div>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4">
                                <div class="skeleton skeleton-feature-icon"></div>
                                <div class="skeleton-feature-text">
                                    <div class="skeleton skeleton-text short mb-2"></div>
                                    <div class="skeleton skeleton-text long"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Product Showcase Section -->
        <section id="shop" class="py-20 sm:py-32 bg-white shadow-2xl rounded-t-[40px] mt-12 border-t-8 border-sky-100">
            <div class="container">
                <div id="shop-header">
                    <div class="skeleton skeleton-section-title mx-auto"></div>
                    <div class="skeleton skeleton-section-subtitle mx-auto"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" id="products-grid">
                    <!-- Product skeleton cards -->
                    <div class="bg-white rounded-2xl p-6 shadow-xl border border-gray-100">
                        <div class="skeleton skeleton-image"></div>
                        <div class="skeleton skeleton-text short mb-1"></div>
                        <div class="skeleton skeleton-text medium mb-2"></div>
                        <div class="skeleton skeleton-text long mb-4"></div>
                        <div class="skeleton skeleton-price"></div>
                        <div class="skeleton skeleton-button"></div>
                        <div class="skeleton skeleton-button-small"></div>
                    </div>
                    <div class="bg-white rounded-2xl p-6 shadow-xl border border-gray-100">
                        <div class="skeleton skeleton-image"></div>
                        <div class="skeleton skeleton-text short mb-1"></div>
                        <div class="skeleton skeleton-text medium mb-2"></div>
                        <div class="skeleton skeleton-text long mb-4"></div>
                        <div class="skeleton skeleton-price"></div>
                        <div class="skeleton skeleton-button"></div>
                        <div class="skeleton skeleton-button-small"></div>
                    </div>
                    <div class="bg-white rounded-2xl p-6 shadow-xl border border-gray-100">
                        <div class="skeleton skeleton-image"></div>
                        <div class="skeleton skeleton-text short mb-1"></div>
                        <div class="skeleton skeleton-text medium mb-2"></div>
                        <div class="skeleton skeleton-text long mb-4"></div>
                        <div class="skeleton skeleton-price"></div>
                        <div class="skeleton skeleton-button"></div>
                        <div class="skeleton skeleton-button-small"></div>
                    </div>
                    <div class="bg-white rounded-2xl p-6 shadow-xl border border-gray-100">
                        <div class="skeleton skeleton-image"></div>
                        <div class="skeleton skeleton-text short mb-1"></div>
                        <div class="skeleton skeleton-text medium mb-2"></div>
                        <div class="skeleton skeleton-text long mb-4"></div>
                        <div class="skeleton skeleton-price"></div>
                        <div class="skeleton skeleton-button"></div>
                        <div class="skeleton skeleton-button-small"></div>
                    </div>
                </div>
                
                <div class="text-center mt-16">
                    <div id="browse-button-container">
                        <div class="skeleton skeleton-button mx-auto" style="width: 16rem;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Form -->
        <section id="contact" class="py-20 sm:py-32">
            <div class="container">
                <div id="contact-header">
                    <div class="skeleton skeleton-section-title mx-auto"></div>
                    <div class="skeleton skeleton-section-subtitle mx-auto"></div>
                </div>
                
                <div id="contact-form-container" class="max-w-xl mx-auto bg-white p-8 sm:p-10 rounded-2xl shadow-2xl border border-gray-100">
                    <div class="space-y-6">
                        <div>
                            <div class="skeleton skeleton-text short mb-2"></div>
                            <div class="skeleton skeleton-contact-input"></div>
                        </div>
                        <div>
                            <div class="skeleton skeleton-text short mb-2"></div>
                            <div class="skeleton skeleton-contact-input"></div>
                        </div>
                        <div>
                            <div class="skeleton skeleton-text short mb-2"></div>
                            <div class="skeleton skeleton-contact-textarea"></div>
                        </div>
                        <div>
                            <div class="skeleton skeleton-contact-button"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Professional Footer -->
<footer class="bg-gray-900 text-white pt-12 pb-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Main Footer Content -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
            <!-- Company Info -->
            <div class="lg:col-span-1">
                <div class="flex items-center mb-4">
                    <div class="h-10 w-10 flex items-center justify-center mr-3">
                        <img src="./logo.jpg" alt="RoboTechnique Logo" class="h-10 w-auto object-contain rounded" onerror="this.style.display='none'">
                    </div>
                    <span class="text-2xl font-bold">
                        <span class="text-white">Robo</span><span class="text-sky-500">Technique</span>
                    </span>
                </div>
                <p class="text-gray-400 mb-6 text-sm leading-relaxed">
                    Premium Robotics & IoT Components. Engineered for precision and built for the next generation of automation projects.
                </p>
                
                <!-- Social Icons - Desktop (Horizontal) -->
                <div class="hidden md:flex space-x-3">
                    <a href="https://www.instagram.com/YOURCLIENTINSTAGRAM" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                    <a href="https://whatsapp.com/channel/0029Vb6MQB7BKfi9WI2Ypn1h" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893-.001-3.189-1.262-6.209-3.553-8.485" />
                        </svg>
                    </a>
                    <a href="https://www.youtube.com/YOURCLIENTCHANNEL" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.417-4.814a2.507 2.507 0 0 1 1.768-1.768C5.744 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z" clip-rule="evenodd" />
                        </svg>
                    </a>
                    <a href="https://www.facebook.com/YOURCLIENTPAGE" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.129 22 16.99 22 12z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
            </div>
            
            <!-- Quick Links -->
            <div>
                <h3 class="text-lg font-semibold mb-4 text-white">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="footer-link text-gray-400 hover:text-white">Home</a></li>
                    <li><a href="#shop" class="footer-link text-gray-400 hover:text-white">Shop</a></li>
                    <li><a href="#brand" class="footer-link text-gray-400 hover:text-white">About Us</a></li>
                    <li><a href="#contact" class="footer-link text-gray-400 hover:text-white">Contact</a></li>
                    <li><a href="#" class="footer-link text-gray-400 hover:text-white">Blog</a></li>
                </ul>
            </div>
            
            <!-- Customer Service -->
<div id="customer-service-links">
    <h3 class="text-lg font-semibold mb-4 text-white">Customer Service</h3>
    <ul class="space-y-2">
        <li><a href="#contact" class="footer-link text-gray-400 hover:text-white">Shipping Policy</a></li>
        <li><a href="#contact" class="footer-link text-gray-400 hover:text-white">FAQ</a></li>
        <li><a href="#contact" class="footer-link text-gray-400 hover:text-white">Support Center</a></li>
        <li><a href="#contact" class="footer-link text-gray-400 hover:text-white">Size Guide</a></li>
    </ul>
</div>
            
            <!-- Newsletter -->
            <div>
                <h3 class="text-lg font-semibold mb-4 text-white">Stay Updated</h3>
                <p class="text-gray-400 mb-4 text-sm">Subscribe to our newsletter for the latest updates on robotics and IoT components.</p>
                <form class="space-y-3" onsubmit="handleNewsletterSubscription(event)">
                    <input type="email" placeholder="Your email address" class="w-full px-4 py-3 rounded-lg newsletter-input text-sm" required>
                    <button type="submit" class="w-full py-3 rounded-lg font-semibold newsletter-btn text-white text-sm">
                        Subscribe Now
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Divider -->
        <div class="footer-divider"></div>
        
        <!-- Mobile Social Icons (Centered) -->
        <div class="md:hidden flex justify-center space-x-4 mb-6">
            <a href="https://www.instagram.com/YOURCLIENTINSTAGRAM" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                </svg>
            </a>
            <a href="https://wa.me/YOURCLIENTNUMBER" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893-.001-3.189-1.262-6.209-3.553-8.485" />
                </svg>
            </a>
            <a href="https://www.youtube.com/YOURCLIENTCHANNEL" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.417-4.814a2.507 2.507 0 0 1 1.768-1.768C5.744 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z" clip-rule="evenodd" />
                </svg>
            </a>
            <a href="https://www.facebook.com/YOURCLIENTPAGE" target="_blank" class="social-icon bg-gray-800 rounded-lg p-3">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.129 22 16.99 22 12z" clip-rule="evenodd" />
                </svg>
            </a>
        </div>
        
        <!-- Bottom Section -->
        <div class="flex flex-col md:flex-row justify-between items-center">
            <!-- Copyright and Links -->
            <div class="text-center md:text-left mb-4 md:mb-0">
                <p class="text-gray-400 text-sm">
                    &copy; 2025 RoboTechnique. All rights reserved.
                </p>
            </div>
            
            <!-- Policy Links -->
            <!-- Policy Links -->
            <div class="flex flex-wrap justify-center space-x-4">
                <a href="javascript:void(0)" onclick="openLegalPage('terms')" class="footer-link text-gray-400 hover:text-white text-sm">Terms of Service</a>
                <a href="javascript:void(0)" onclick="openLegalPage('privacy')" class="footer-link text-gray-400 hover:text-white text-sm">Privacy Policy</a>
                <a href="javascript:void(0)" onclick="openLegalPage('cookie')" class="footer-link text-gray-400 hover:text-white text-sm">Cookie Policy</a>
            </div>
        </div>
    </div>
</footer>

    <!-- Toast Container (for stacking multiple toasts) -->
    <div id="toast-container" class="fixed top-20 right-6 z-[60] flex flex-col space-y-3"></div>

    <!-- Legal Pages Modal -->
<div id="legal-modal" class="fixed inset-0 z-[100] flex items-center justify-center modal-backdrop transition-opacity duration-300 hidden">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden mx-4">
        <div class="flex justify-between items-center p-6 border-b border-gray-200 bg-gray-50">
            <h2 id="legal-modal-title" class="text-2xl font-bold text-gray-800">Legal Document</h2>
            <button id="legal-modal-close" class="p-2 rounded-full hover:bg-gray-200 transition">
                <i data-lucide="x" class="w-6 h-6 text-gray-700"></i>
            </button>
        </div>
        <div id="legal-modal-content" class="p-6 overflow-y-auto max-h-[70vh]">
            <!-- Content will be dynamically inserted here -->
        </div>
    </div>
</div>

    <script>
        // Global Constants
        const SUPABASE_URL = 'https://lpylrmsbmivlbonsytwv.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxweWxybXNibWl2bGJvbnN5dHd2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMTM4MDMsImV4cCI6MjA3NzU4OTgwM30.r7PxT7UQzkXPeZ2Dtuj8l6gRdnWLTUY-1JrPjv5WyCo';
        
        // State Management
        let cart = [];
        let isAddingToCart = false;
        let checkoutDetails = { total: 0, itemCount: 0 };
        let products = []; // Will be loaded from Supabase
        let siteSettings = {}; // Will store shipping, WhatsApp, Amazon settings
        let productsLoaded = false;

        // DOM Elements
        const cartDrawer = document.getElementById('cart-drawer');
        const checkoutModal = document.getElementById('checkout-modal');
        const toast = document.getElementById('toast');
        const cartButton = document.getElementById('cart-button');
        const cartCount = document.getElementById('cart-count');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const header = document.getElementById('header');
        const productsGrid = document.getElementById('products-grid');
        const heroContent = document.getElementById('hero-content');
        const brandContent = document.getElementById('brand-content');
        const shopHeader = document.getElementById('shop-header');
        const contactHeader = document.getElementById('contact-header');
        const contactFormContainer = document.getElementById('contact-form-container');
        const browseButtonContainer = document.getElementById('browse-button-container');

        // Initialize Supabase safely
        let supabase;
        try {
            if (window.supabase && window.supabase.createClient) {
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            } else {
                console.warn('Supabase not available, using fallback data');
            }
        } catch (error) {
            console.warn('Supabase initialization failed:', error);
        }

        // Utility Functions
        function formatINR(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0,
            }).format(amount || 0);
        }

        function sendMail() {
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const messageInput = document.getElementById('message');
            
            // Check if form elements exist
            if (!nameInput || !emailInput || !messageInput) {
                console.warn('Contact form elements not found');
                alert("Contact form is not ready yet. Please try again in a moment.");
                return;
            }

            const name = nameInput.value.trim() || '';
            const email = emailInput.value.trim() || '';
            const message = messageInput.value.trim() || '';
            const adminEmail = "robotechnique.team@gmail.com";

            if (!name || !email || !message) {
                alert("Please fill out all fields before submitting!");
                return;
            }

            const subject = `Project Enquiry from ${name}`;
            const body = `Hello RoboTechnique Team,\n\nMy name is ${name} (${email}).\n\nProject Enquiry:\n${message}\n\nThank you!`;

            const mailtoLink = `mailto:${adminEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
        }
        
        // Newsletter subscription handler
        function handleNewsletterSubscription(event) {
            event.preventDefault(); // Prevent page refresh
            
            const form = event.target;
            const emailInput = form.querySelector('input[type="email"]');
            const email = emailInput.value.trim();
            
            if (!email) {
                showNewsletterToast('Please enter your email address', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                showNewsletterToast('Please enter a valid email address', 'error');
                return;
            }
            
            // Simulate API call - replace with your actual newsletter service
            console.log('Subscribing email:', email);
            
            // Show success message
            showNewsletterToast('Thank you for subscribing!', 'success');
            
            // Clear the input
            emailInput.value = '';
        }

        // Legal Pages Modal Functions
        function openLegalPage(page) {
            const modal = document.getElementById('legal-modal');
            const title = document.getElementById('legal-modal-title');
            const content = document.getElementById('legal-modal-content');
            
            if (!modal || !title || !content) return;
            
            // Set content based on the page
            switch(page) {
                case 'terms':
                    title.textContent = 'Terms of Service';
                    content.innerHTML = getTermsContent();
                    break;
                case 'privacy':
                    title.textContent = 'Privacy Policy';
                    content.innerHTML = getPrivacyContent();
                    break;
                case 'cookie':
                    title.textContent = 'Cookie Policy';
                    content.innerHTML = getCookieContent();
                    break;
                case 'sitemap':
                    title.textContent = 'Sitemap';
                    content.innerHTML = getSitemapContent();
                    break;
                default:
                    return;
            }
            
            // Show modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Re-initialize Lucide icons
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
        }

        function closeLegalModal() {
            const modal = document.getElementById('legal-modal');
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = 'unset';
            }
        }

        // Legal Content Templates
        function getTermsContent() {
            return `
                <div class="legal-content">
                    <h3>Terms of Service</h3>
                    <p><strong>Last Updated: ${new Date().toLocaleDateString()}</strong></p>
                    
                    <h4>1. Acceptance of Terms</h4>
                    <p>By accessing and using RoboTechnique's website and services, you accept and agree to be bound by the terms and provision of this agreement.</p>
                    
                    <h4>2. Use License</h4>
                    <p>Permission is granted to temporarily access the materials on RoboTechnique's website for personal, non-commercial transitory viewing only.</p>
                    
                    <h4>3. Products and Services</h4>
                    <p>All robotics and IoT components are sold "as is". We make no warranties, expressed or implied, and hereby disclaim and negate all other warranties including, without limitation, implied warranties or conditions of merchantability.</p>
                    
                    <h4>4. Limitations</h4>
                    <p>In no event shall RoboTechnique or its suppliers be liable for any damages arising out of the use or inability to use the materials on our website.</p>
                    
                    <h4>5. Ordering and Payment</h4>
                    <p>All orders are subject to availability and confirmation of the order price. We reserve the right to refuse any order you place with us.</p>
                    
                    <h4>6. Shipping and Delivery</h4>
                    <p>Shipping times are estimates and not guaranteed. We are not responsible for delays due to customs, weather, or other unforeseen circumstances.</p>
                    
                    <h4>7. Governing Law</h4>
                    <p>These terms and conditions are governed by and construed in accordance with the laws of India.</p>
                </div>
            `;
        }

        function getPrivacyContent() {
            return `
                <div class="legal-content">
                    <h3>Privacy Policy</h3>
                    <p><strong>Last Updated: ${new Date().toLocaleDateString()}</strong></p>
                    
                    <h4>1. Information We Collect</h4>
                    <p>We collect information you provide directly to us, such as when you create an account, make a purchase, or contact us for support.</p>
                    
                    <h4>2. How We Use Your Information</h4>
                    <p>We use the information we collect to:</p>
                    <ul>
                        <li>Provide, maintain, and improve our services</li>
                        <li>Process transactions and send related information</li>
                        <li>Send you technical notices and support messages</li>
                        <li>Respond to your comments and questions</li>
                    </ul>
                    
                    <h4>3. Information Sharing</h4>
                    <p>We do not sell, trade, or otherwise transfer your personal information to outside parties except for trusted third parties who assist us in operating our website.</p>
                    
                    <h4>4. Data Security</h4>
                    <p>We implement appropriate technical and organizational security measures to protect your personal information.</p>
                    
                    <h4>5. Your Rights</h4>
                    <p>You have the right to access, correct, or delete your personal information. Contact us to exercise these rights.</p>
                    
                    <h4>6. Cookies</h4>
                    <p>We use cookies and similar tracking technologies to track activity on our website. See our Cookie Policy for more information.</p>
                    
                    <h4>7. Changes to This Policy</h4>
                    <p>We may update this privacy policy from time to time. We will notify you of any changes by posting the new policy on this page.</p>
                </div>
            `;
        }

        function getCookieContent() {
            return `
                <div class="legal-content">
                    <h3>Cookie Policy</h3>
                    <p><strong>Last Updated: ${new Date().toLocaleDateString()}</strong></p>
                    
                    <h4>1. What Are Cookies</h4>
                    <p>Cookies are small text files that are placed on your computer by websites that you visit.</p>
                    
                    <h4>2. How We Use Cookies</h4>
                    <p>We use cookies for the following purposes:</p>
                    <ul>
                        <li><strong>Essential Cookies:</strong> Required for the website to function properly</li>
                        <li><strong>Performance Cookies:</strong> Help us understand how visitors interact with our website</li>
                        <li><strong>Functionality Cookies:</strong> Allow the website to remember choices you make</li>
                        <li><strong>Targeting Cookies:</strong> Used to deliver relevant advertisements</li>
                    </ul>
                    
                    <h4>3. Third-Party Cookies</h4>
                    <p>We may also use various third-party cookies to report usage statistics and deliver advertisements.</p>
                    
                    <h4>4. Managing Cookies</h4>
                    <p>You can control and/or delete cookies as you wish. You can delete all cookies that are already on your computer and you can set most browsers to prevent them from being placed.</p>
                    
                    <h4>5. Your Consent</h4>
                    <p>By using our website, you consent to the use of cookies in accordance with this Cookie Policy.</p>
                </div>
            `;
        }

        function getSitemapContent() {
            return `
                <div class="legal-content">
                    <h3>Sitemap</h3>
                    <p>Navigate through our website easily using this sitemap:</p>
                    
                    <h4>Main Pages</h4>
                    <ul>
                        <li><strong>Home:</strong> Welcome to RoboTechnique - Premium Robotics & IoT Components</li>
                        <li><strong>Shop:</strong> Browse our core product line of robotics components</li>
                        <li><strong>Brand:</strong> Learn about our mission and quality standards</li>
                        <li><strong>Contact:</strong> Get in touch with our team</li>
                    </ul>
                    
                    <h4>Product Categories</h4>
                    <ul>
                        <li>Microcontrollers & Development Boards</li>
                        <li>Sensors & Modules</li>
                        <li>Motors & Actuators</li>
                        <li>Power Management</li>
                        <li>Communication Modules</li>
                        <li>Robotics Kits</li>
                        <li>IoT Components</li>
                    </ul>
                    
                    <h4>Customer Service</h4>
                    <ul>
                        <li>Shipping Policy</li>
                        <li>Returns & Refunds</li>
                        <li>FAQ</li>
                        <li>Support Center</li>
                        <li>Size Guide</li>
                    </ul>
                    
                    <h4>Legal Pages</h4>
                    <ul>
                        <li>Terms of Service</li>
                        <li>Privacy Policy</li>
                        <li>Cookie Policy</li>
                        <li>Sitemap (this page)</li>
                    </ul>
                </div>
            `;
        }

        // Email validation helper
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Newsletter toast notification
        function showNewsletterToast(message, type = 'success') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-600' : 'bg-red-600';
            
            toast.className = `flex items-center space-x-3 p-4 ${bgColor} text-white rounded-xl shadow-2xl border-b-4 ${type === 'success' ? 'border-green-300' : 'border-red-300'} opacity-0 translate-y-[-10px] transition-all duration-500 mb-3`;
            toast.innerHTML = `
                <i data-lucide="${type === 'success' ? 'check-circle' : 'alert-circle'}" class="w-5 h-5 ${type === 'success' ? 'text-green-300' : 'text-red-300'}"></i>
                <span class="font-semibold">${message}</span>
            `;
            
            // Get or create newsletter toast container
            let container = document.getElementById("newsletter-toast-container");
            if (!container) {
                container = document.createElement("div");
                container.id = "newsletter-toast-container";
                container.className = "fixed top-32 right-6 z-[60] flex flex-col space-y-3";
                document.body.appendChild(container);
            }
            
            container.appendChild(toast);
            
            // Re-initialize Lucide icons
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
            
            // Animate in
            requestAnimationFrame(() => {
                toast.classList.remove("opacity-0", "translate-y-[-10px]");
                toast.classList.add("opacity-100", "translate-y-0");
            });
            
            // Auto-hide after 4 seconds
            setTimeout(() => {
                toast.classList.add("opacity-0", "translate-y-[-10px]");
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 600);
            }, 4000);
        }

        function cleanPrice(price) {
            if (typeof price === 'number') return price;
            if (typeof price === 'string') {
                const cleaned = price.replace(/[â‚¹,]/g, '').trim();
                return parseFloat(cleaned) || 0;
            }
            return 0;
        }

        function updateCartCount() {
            const count = cart.reduce((total, item) => total + (item.quantity || 0), 0);
            if (cartCount) {
                cartCount.textContent = count;
                if (count > 0) {
                    cartCount.classList.remove('hidden');
                } else {
                    cartCount.classList.add('hidden');
                }
            }
        }

        // FIXED: Toggle Read More functionality
        function toggleReadMore(productId) {
            const description = document.getElementById(`description-${productId}`);
            const button = document.getElementById(`read-more-btn-${productId}`);
            
            if (description && button) {
                if (description.classList.contains('collapsed')) {
                    description.classList.remove('collapsed');
                    description.classList.add('expanded');
                    button.textContent = 'Read Less';
                } else {
                    description.classList.remove('expanded');
                    description.classList.add('collapsed');
                    button.textContent = 'Read More';
                }
            }
        }

        // FIXED: Check if description needs "Read More" button
        function needsReadMore(descriptionElement) {
            if (!descriptionElement) return false;
            
            // Reset to get accurate measurements
            descriptionElement.style.display = 'block';
            descriptionElement.style.maxHeight = 'none';
            descriptionElement.style.webkitLineClamp = 'unset';
            
            const lineHeight = parseFloat(getComputedStyle(descriptionElement).lineHeight);
            const maxHeight = lineHeight * 2;
            const needsMore = descriptionElement.scrollHeight > maxHeight;
            
            // Restore collapsed state
            descriptionElement.classList.add('collapsed');
            descriptionElement.classList.remove('expanded');
            
            return needsMore;
        }

        // FIXED: Initialize Read More buttons after products are rendered
        function initializeReadMoreButtons() {
            products.forEach(product => {
                const descriptionElement = document.getElementById(`description-${product.id}`);
                const buttonElement = document.getElementById(`read-more-btn-${product.id}`);
                
                if (descriptionElement && buttonElement) {
                    // Check if this description needs a read more button
                    const shouldShowButton = needsReadMore(descriptionElement);
                    
                    if (!shouldShowButton) {
                        buttonElement.classList.add('hidden');
                    } else {
                        buttonElement.classList.remove('hidden');
                    }
                }
            });
        }

        // NEW: Render actual content with fade-in animation
        function renderActualContent() {
            // Render Hero Section
            if (heroContent) {
                heroContent.innerHTML = `
                    <div class="scroll-fade-in content-fade-in">
                        <p class="text-base font-semibold text-orange-600 mb-3 tracking-wide uppercase">The Future Is Modular</p>
                        <h1 class="text-6xl sm:text-7xl lg:text-8xl font-extrabold tracking-tight mb-6 text-gray-900 leading-tight">
                            Premium Robotics & <span class="text-sky-600">IoT Components</span>
                        </h1>
                        <p class="text-xl sm:text-2xl text-gray-600 max-w-4xl mx-auto mb-10">
                            Engineered for precision and built for the next generation of automation projects.
                        </p>
                        <a href="#shop" class="btn btn-primary inline-flex items-center px-10 py-4 rounded-full shadow-2xl ring-4 ring-orange-500/30 content-fade-in">
                            Shop The Collection
                            <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
                        </a>
                    </div>
                `;
            }

            // Render Brand Section
            if (brandContent) {
                brandContent.innerHTML = `
                    <div class="lg:flex lg:space-x-12">
                        <div class="lg:w-1/2">
                            <div class="scroll-fade-in content-fade-in">
                                <h2 class="text-4xl sm:text-5xl font-extrabold text-gray-800 mb-6 leading-snug">
                                    Crafting the <span class="text-sky-600">Foundation</span> of Automation
                                </h2>
                            </div>
                        </div>
                        <div class="lg:w-1/2 mt-8 lg:mt-0 space-y-8">
                            <div class="scroll-fade-in content-fade-in">
                                <div class="flex items-start space-x-4">
                                    <i data-lucide="trending-up" class="w-8 h-8 text-orange-500 flex-shrink-0 mt-1"></i>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800">Uncompromising Quality</h3>
                                        <p class="mt-1 text-gray-600">Every component is tested under extreme conditions to ensure reliability and superior performance.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="scroll-fade-in content-fade-in">
                                <div class="flex items-start space-x-4">
                                    <i data-lucide="zap" class="w-8 h-8 text-orange-500 flex-shrink-0 mt-1"></i>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800">Seamless Integration</h3>
                                        <p class="mt-1 text-gray-600">Designed for open standards with plug-and-play compatibility across popular platforms.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="scroll-fade-in content-fade-in">
                                <div class="flex items-start space-x-4">
                                    <i data-lucide="atom" class="w-8 h-8 text-orange-500 flex-shrink-0 mt-1"></i>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800">Future-Proofed Technology</h3>
                                        <p class="mt-1 text-gray-600">Incorporating the latest in Edge AI and decentralized control for next-gen projects.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Render Shop Header
            if (shopHeader) {
                shopHeader.innerHTML = `
                    <div class="scroll-fade-in content-fade-in">
                        <h2 class="text-4xl font-extrabold text-center mb-4 text-gray-800">Our Core Product Line</h2>
                        <p class="text-center text-xl text-gray-500 mb-16 max-w-3xl mx-auto">
                            The essential components driving innovation in robotics and complex systems worldwide.
                        </p>
                    </div>
                `;
            }

            // Render Contact Header
            if (contactHeader) {
                contactHeader.innerHTML = `
                    <div class="scroll-fade-in content-fade-in">
                        <h2 class="text-4xl font-extrabold text-center mb-4 text-gray-800">Get In Touch</h2>
                        <p class="text-center text-xl text-gray-500 mb-12 max-w-3xl mx-auto">
                            Need technical specifications or partnership details? Our team is ready to assist.
                        </p>
                    </div>
                `;
            }

            // Render Contact Form
            if (contactFormContainer) {
                contactFormContainer.innerHTML = `
                    <div class="scroll-fade-in content-fade-in">
                        <div class="space-y-6">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
                                <input type="text" name="name" id="name" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-inner focus:ring-sky-500 focus:border-sky-500 transition duration-150">
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Work Email</label>
                                <input type="email" name="email" id="email" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-inner focus:ring-sky-500 focus:border-sky-500 transition duration-150">
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-gray-700">Project Inquiry</label>
                                <textarea id="message" name="message" rows="4" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-inner focus:ring-sky-500 focus:border-sky-500 transition duration-150 resize-none"></textarea>
                            </div>
                            <div>
                                <button type="button" onclick="sendMail()" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-base font-bold text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition duration-150 transform hover:scale-[1.01]">
                                    Send Request
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Render Browse Button
            if (browseButtonContainer) {
                browseButtonContainer.innerHTML = `
                    <div class="scroll-fade-in content-fade-in">
                        <a href="#shop" class="inline-flex justify-center items-center px-8 py-3 border border-sky-500 text-base font-bold rounded-full shadow-lg text-sky-600 bg-white hover:bg-sky-50 transition duration-300 transform hover:scale-105">
                            Browse All Categories (<span id="product-count">${products.length}</span> Products)
                        </a>
                    </div>
                `;
            }

            // Re-initialize Lucide icons
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
        }

        // Load products from Supabase with fallback
        async function loadProductsFromSupabase() {
            try {
                if (!supabase) {
                    throw new Error('Supabase not available');
                }

                const { data, error } = await supabase
                    .from('products')
                    .select('*')
                    .order('title', { ascending: true });

                if (error) {
                    throw error;
                }

                console.log('Products loaded from Supabase:', data?.length || 0);
                return data || [];
            } catch (error) {
                console.error('Error loading products from Supabase:', error);
                // Fallback to localStorage if available
                try {
                    const savedData = localStorage.getItem('robotechniqueData');
                    if (savedData) {
                        const parsedData = JSON.parse(savedData);
                        return parsedData.products || [];
                    }
                } catch (e) {
                    console.error('Error parsing localStorage data:', e);
                }
                return [];
            }
        }

        // Load settings from Supabase with fallback
        async function loadSettingsFromSupabase() {
            try {
                if (!supabase) {
                    throw new Error('Supabase not available');
                }

                const { data, error } = await supabase
                    .from('settings')
                    .select('*')
                    .eq('id', 1)
                    .single();

                if (error) {
                    throw error;
                }

                console.log('Settings loaded from Supabase');
                return data || {};
            } catch (error) {
                console.error('Error loading settings from Supabase:', error);
                // Fallback to localStorage if available
                try {
                    const savedSettings = localStorage.getItem('robotechniqueSettings');
                    if (savedSettings) {
                        return JSON.parse(savedSettings);
                    }
                } catch (e) {
                    console.error('Error parsing localStorage settings:', e);
                }
                // Return default settings
                return {
                    freeShippingThreshold: 5000,
                    shippingCost: 100,
                    whatsappNumber: '919718335330',
                    amazonLink: 'https://www.amazon.in/l/27943762031?me=A2NRJEQ5QH7HFB&tag=ShopReferral_7932ea5a-6372-4c7b-87f9-3d88e09214f4&ref=sf_seller_app_share_new_ls_srb'
                };
            }
        }

        // NEW: Trusted Sites Dropdown Functionality
        function toggleTrustedSites(productId) {
            const dropdown = document.getElementById(`trusted-sites-${productId}`);
            const button = document.getElementById(`trusted-sites-button-${productId}`);
            
            if (dropdown && button) {
                dropdown.classList.toggle('open');
                button.classList.toggle('rotated');
                
                const icon = button.querySelector('svg');
                if (icon) {
                    if (dropdown.classList.contains('open')) {
                        icon.style.transform = 'rotate(180deg)';
                    } else {
                        icon.style.transform = 'rotate(0deg)';
                    }
                }
            }
        }

        // Enhanced Add to Cart with Flying Animation
        function addToCart(product, buttonElement) {
            if (isAddingToCart || !product) return;
            isAddingToCart = true;

            // Create a clean product object
            const cleanProduct = {
                id: product.id || String(Date.now()),
                title: (product.title || 'Unknown Product').replace(/'/g, "\\'"),
                category: product.category || 'General',
                price: cleanPrice(product.price),
                imgSrc: product.image || 'https://placehold.co/400x300/eeeeee/333333?text=Product+Image',
                imgAlt: product.title || 'Product Image',
                quantity: 1
            };

            const existingItem = cart.find(item => item.id === cleanProduct.id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push(cleanProduct);
            }
            updateCartCount();

            // Create flying animation
            if (buttonElement && cartButton) {
                createFlyingAnimation(buttonElement, cleanProduct);
            }

            // Show success toast
            showSuccessToast(cleanProduct.title);

            // Re-render cart to show updated items
            setTimeout(() => {
                renderCartDrawer();
                isAddingToCart = false;
            }, 1000);
        }

        function createFlyingAnimation(buttonElement, product) {
            if (!buttonElement || !cartButton) return;

            // Get button position
            const buttonRect = buttonElement.getBoundingClientRect();
            const cartButtonRect = cartButton.getBoundingClientRect();

            // Create flying element
            const flyingElement = document.createElement('div');
            flyingElement.className = 'flying-item';
            flyingElement.innerHTML = `
                <div class="flying-item-content">
                    <img src="${product.imgSrc}" alt="${product.imgAlt}" class="flying-item-image" onerror="this.src='https://placehold.co/400x300/eeeeee/333333?text=Product+Image'">
                    <div class="flying-item-glow"></div>
                </div>
            `;

            // Set initial position
            flyingElement.style.position = 'fixed';
            flyingElement.style.left = `${buttonRect.left + buttonRect.width / 2}px`;
            flyingElement.style.top = `${buttonRect.top + buttonRect.height / 2}px`;
            flyingElement.style.zIndex = '1000';
            flyingElement.style.pointerEvents = 'none';

            document.body.appendChild(flyingElement);

            // Animate to cart
            const animation = flyingElement.animate([
                {
                    transform: 'translate(0, 0) scale(1)',
                    opacity: 1
                },
                {
                    transform: 'translate(0, -50px) scale(1.2)',
                    opacity: 0.8,
                    offset: 0.3
                },
                {
                    transform: `translate(${cartButtonRect.left - buttonRect.left}px, ${cartButtonRect.top - buttonRect.top}px) scale(0.3)`,
                    opacity: 0
                }
            ], {
                duration: 800,
                easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
            });

            // Remove element after animation
            animation.onfinish = () => {
                if (flyingElement.parentNode) {
                    flyingElement.remove();
                }
                // Add cart bounce effect
                if (cartButton) {
                    cartButton.classList.add('cart-bounce');
                    setTimeout(() => {
                        cartButton.classList.remove('cart-bounce');
                    }, 300);
                }
            };
        }

        function showSuccessToast(productName) {
            // Get or create the toast container
            let container = document.getElementById("toast-container");
            if (!container) {
                container = document.createElement("div");
                container.id = "toast-container";
                container.className = "fixed top-20 right-6 z-[60] flex flex-col space-y-3";
                document.body.appendChild(container);
            }

            // Create toast element
            const toast = document.createElement("div");
            toast.className = "flex items-center space-x-3 p-4 bg-sky-600 text-white rounded-xl shadow-2xl border-b-4 border-orange-300 opacity-0 translate-y-[-10px] transition-all duration-500";
            toast.innerHTML = `
                <i data-lucide="check-circle" class="w-5 h-5 text-green-300 animate-pulse"></i>
                <span class="font-semibold">${productName} added to cart!</span>
            `;

            // Append to container
            container.appendChild(toast);
            
            // Re-initialize Lucide icons for the new toast
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }

            // Animate in
            requestAnimationFrame(() => {
                toast.classList.remove("opacity-0", "translate-y-[-10px]");
                toast.classList.add("opacity-100", "translate-y-0");
            });

            // Auto-hide after 3 seconds (but smoothly)
            setTimeout(() => {
                toast.classList.add("opacity-0", "translate-y-[-10px]");
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 600);
            }, 4000);
        }

        function updateQuantity(id, delta) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity = Math.max(1, (item.quantity || 0) + delta);
                updateCartCount();
                renderCartDrawer();
            }
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartCount();
            renderCartDrawer();
            
            // Close cart if empty
            if (cart.length === 0) {
                closeCartDrawer();
            }
        }

        // UI Functions
        function openCartDrawer() {
            renderCartDrawer();
            if (cartDrawer) {
                cartDrawer.classList.remove('translate-x-full');
            }
            document.body.style.overflow = 'hidden';
        }

        function closeCartDrawer() {
            if (cartDrawer) {
                cartDrawer.classList.add('translate-x-full');
            }
            document.body.style.overflow = 'unset';
        }

        function openCheckoutModal() {
            const subtotal = cart.reduce((sum, item) => sum + (cleanPrice(item.price) * (item.quantity || 0)), 0);
            const shipping = cart.length === 0 ? 0 : "On WhatsApp";
            const total = cart.length === 0 ? 0 : subtotal;
            const itemCount = cart.reduce((total, item) => total + (item.quantity || 0), 0);
            
            checkoutDetails = { total, itemCount };
            renderCheckoutModal();
            if (checkoutModal) {
                checkoutModal.classList.remove('hidden');
            }
            document.body.style.overflow = 'hidden';
        }

        function closeCheckoutModal() {
            if (checkoutModal) {
                checkoutModal.classList.add('hidden');
            }
            document.body.style.overflow = 'unset';
        }

        // FIXED: Render Products with better error handling and loading states
        function renderProducts() {
            if (!productsGrid) {
                console.warn('Products grid element not found');
                return;
            }

            // Clear existing content safely
            productsGrid.innerHTML = '';

            if (!products || products.length === 0) {
                productsGrid.innerHTML = `
                    <div class="col-span-4 text-center py-12 content-fade-in">
                        <i data-lucide="package" class="w-16 h-16 text-gray-300 mx-auto mb-4"></i>
                        <p class="text-gray-600 text-lg">Loading products...</p>
                        <p class="text-gray-500 text-sm">Please wait while we load our products.</p>
                    </div>
                `;
                
                // Try to re-render after a short delay if products are empty
                if (products.length === 0 && !productsLoaded) {
                    setTimeout(() => {
                        if (products.length > 0) {
                            renderProducts();
                        }
                    }, 1000);
                }
                
                if (window.lucide && window.lucide.createIcons) {
                    window.lucide.createIcons();
                }
                return;
            }

            // Update the grid class for mobile
            productsGrid.className = 'products-grid';

            try {
                productsGrid.innerHTML = products.map(product => {
                    const hasAmazonLink = product.amazon_link && product.amazon_link.trim() !== '';
                    const hasFlipkartLink = product.flipkart_link && product.flipkart_link.trim() !== '';
                    const hasAnyTrustedLink = hasAmazonLink || hasFlipkartLink;

                    return `
                    <div class="product-card scroll-fade-in content-fade-in">
                        <div class="product-image-container">
                            <img src="${product.image || 'https://placehold.co/400x300/eeeeee/333333?text=Product+Image'}" 
                                 alt="${product.title || 'Product'}" 
                                 class="product-image"
                                 onerror="this.src='https://placehold.co/400x300/eeeeee/333333?text=Product+Image'">
                        </div>
                        
                        <div class="product-category">${product.category || 'General'}</div>
                        <h3 class="product-title">${product.title || 'Untitled Product'}</h3>
                        <div class="product-description collapsed" id="description-${product.id}">
                            ${product.description || 'High-quality component for your projects.'}
                        </div>
                        
                        <div class="product-price">${formatINR(product.price)}</div>
                        
                        <div class="product-actions">
                            <button onclick="addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')}, this)" class="add-to-cart-btn-mobile">
                                Add to Cart
                            </button>
                            
                            ${hasAnyTrustedLink ? `
                            <div class="trusted-sites-dropdown">
                                <button 
                                    id="trusted-sites-button-${product.id}"
                                    onclick="toggleTrustedSites('${product.id}')" 
                                    class="trusted-sites-button-mobile"
                                >
                                    <div class="flex items-center justify-between">
                                        <span>Other Sites</span>
                                        <svg class="w-3 h-3 transition-transform duration-300 ease-in-out" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </button>
                                
                                <div id="trusted-sites-${product.id}" class="trusted-sites-dropdown-content mt-1 space-y-1 transition-all duration-300 ease-in-out">
                                    ${hasAmazonLink ? `
                                    <a href="${product.amazon_link}" target="_blank" rel="noopener noreferrer" class="trusted-sites-link flex items-center py-2 px-2 text-xs bg-white text-gray-700 rounded border border-gray-200 hover:border-orange-300">
                                        <svg class="w-3 h-3 mr-2 text-orange-500" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M10.605 2.4c-1.303 0-2.492.515-3.376 1.399l-.023.023c-.883.884-1.398 2.073-1.398 3.376v11.756c0 1.25.5 2.387 1.34 3.23.844.843 1.98.023 3.23.023h4.636c1.25 0 2.386-.819 3.23-.843.843-.843 1.34-1.98 1.34-3.23V6.944c0-1.303-.515-2.492-1.398-3.376l-.023-.023c-.884-.884-2.073-1.399-3.376-1.399h-4.636zm-.322 13.91l-2.008-2.008 1.077-1.077 2.008 2.008-1.077 1.077zm3.111-3.111l-2.008-2.008 1.077-1.077 2.008 2.008-1.077 1.077z"/>
                                        </svg>
                                        Amazon
                                    </a>
                                    ` : ''}
                                    
                                    ${hasFlipkartLink ? `
                                    <a href="${product.flipkart_link}" target="_blank" rel="noopener noreferrer" class="trusted-sites-link flex items-center py-2 px-2 text-xs bg-white text-blue-600 rounded border border-gray-200 hover:border-blue-400">
                                        <svg class="w-3 h-3 mr-2" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                                        </svg>
                                        Flipkart
                                    </a>
                                    ` : ''}
                                </div>
                            </div>
                            ` : `
                            <a href="${getAmazonLink()}" target="_blank" rel="noopener noreferrer" class="trusted-sites-button-mobile text-center">
                                Buy on Amazon
                            </a>
                            `}
                        </div>
                    </div>
                `}).join('');

                // Re-initialize Lucide icons
                if (window.lucide && window.lucide.createIcons) {
                    window.lucide.createIcons();
                }

                // Set up click events for product cards
                updateProductCardClickEvents();
                
                // Initialize scroll animations for new elements
                initScrollAnimations();
                
                console.log(`Successfully rendered ${products.length} products`);
                productsLoaded = true;
                
            } catch (error) {
                console.error('Error rendering products:', error);
                productsGrid.innerHTML = `
                    <div class="col-span-4 text-center py-12 content-fade-in">
                        <i data-lucide="alert-triangle" class="w-16 h-16 text-red-300 mx-auto mb-4"></i>
                        <p class="text-gray-600 text-lg">Error loading products</p>
                        <p class="text-gray-500 text-sm">Please refresh the page or try again later.</p>
                        <button onclick="location.reload()" class="mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600">
                            Refresh Page
                        </button>
                    </div>
                `;
            }
        }

        // Helper function to safely update browse button
        function updateBrowseButton() {
            const browseButton = document.querySelector('#browse-button-container a');
            if (browseButton) {
                let productCountSpan = browseButton.querySelector('#product-count');
                if (!productCountSpan) {
                    productCountSpan = document.createElement('span');
                    productCountSpan.id = 'product-count';
                    browseButton.appendChild(productCountSpan);
                }
                productCountSpan.textContent = products.length;
            }
        }

        function getAmazonLink() {
            // Return from siteSettings if available, otherwise default
            return siteSettings.amazonLink || "https://www.amazon.in/l/27943762031?me=A2NRJEQ5QH7HFB&tag=ShopReferral_7932ea5a-6372-4c7b-87f9-3d88e09214f4&ref=sf_seller_app_share_new_ls_srb";
        }

        function getWhatsAppNumber() {
            // Return from siteSettings if available, otherwise default
            return siteSettings.whatsappNumber || '919718335330';
        }

        function renderCartDrawer() {
            if (!cartDrawer) return;
            
            const subtotal = cart.reduce((sum, item) => sum + (cleanPrice(item.price) * (item.quantity || 0)), 0);
            
            // âœ… Fix shipping & total logic
            const shipping = cart.length === 0 ? 0 : "On WhatsApp";
            const total = cart.length === 0 ? 0 : subtotal;

            cartDrawer.innerHTML = `
                <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                    <h2 class="text-2xl font-extrabold text-gray-800 flex items-center">
                        <i data-lucide="shopping-cart" class="w-6 h-6 mr-2 text-orange-500"></i>
                        Your Cart
                    </h2>
                    <button onclick="closeCartDrawer()" class="p-2 rounded-full hover:bg-gray-200 transition">
                        <i data-lucide="x" class="w-6 h-6 text-gray-700"></i>
                    </button>
                </div>

                <div class="flex-1 overflow-y-auto p-6 space-y-6">
                    ${cart.length === 0 ? `
                        <div class="text-center py-12 text-gray-500">
                            <i data-lucide="shopping-cart" class="w-16 h-16 mx-auto mb-4 text-gray-300"></i>
                            <p class="text-lg font-semibold">Your cart is empty.</p>
                            <p class="text-sm">Start adding some robotics components!</p>
                        </div>
                    ` : cart.map(item => `
                        <div class="flex items-center space-x-4 p-4 border rounded-xl shadow-sm hover:shadow-md transition bg-white">
                            <img src="${item.imgSrc}" alt="${item.title}" class="w-16 h-16 object-cover rounded-lg flex-shrink-0 border" onerror="this.src='https://placehold.co/400x300/eeeeee/333333?text=Product+Image'">
                            <div class="flex-1 min-w-0">
                                <p class="font-semibold text-gray-800 truncate">${item.title}</p>
                                <p class="text-sm font-bold text-orange-500">${formatINR(cleanPrice(item.price) * (item.quantity || 0))}</p>
                                <p class="text-xs text-gray-500">Unit: ${formatINR(cleanPrice(item.price))}</p>
                            </div>
                            <div class="flex items-center space-x-2 flex-shrink-0">
                                <button onclick="updateQuantity('${item.id}', -1)" ${(item.quantity || 0) <= 1 ? 'disabled' : ''} class="p-1 rounded-full text-gray-600 hover:bg-gray-200 ${(item.quantity || 0) <= 1 ? 'opacity-50' : ''}">
                                    <i data-lucide="minus" class="w-4 h-4"></i>
                                </button>
                                <span class="font-medium text-lg w-6 text-center">${item.quantity || 0}</span>
                                <button onclick="updateQuantity('${item.id}', 1)" class="p-1 rounded-full text-gray-600 hover:bg-gray-200">
                                    <i data-lucide="plus" class="w-4 h-4"></i>
                                </button>
                                <button onclick="removeFromCart('${item.id}')" class="p-1 ml-2 rounded-full text-red-500 hover:bg-red-50 transition">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="p-6 border-t border-gray-100 bg-gray-50/70 backdrop-blur-sm">
                    <div class="space-y-2 mb-4 text-gray-700">
                        <div class="flex justify-between font-medium">
                            <span>Subtotal:</span>
                            <span>${formatINR(subtotal)}</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Shipping:</span>
                            <span>${shipping}</span>
                        </div>
                        <div class="flex justify-between text-xl font-extrabold text-gray-900 pt-2 border-t border-gray-200">
                            <span>Order Total:</span>
                            <span>${formatINR(total)}</span>
                        </div>
                    </div>
                    <button onclick="openCheckoutModal()" ${cart.length === 0 ? 'disabled' : ''} class="w-full flex items-center justify-center py-4 bg-sky-600 text-white rounded-xl font-bold text-lg hover:bg-sky-700 transition duration-300 shadow-xl shadow-sky-300/50 ${cart.length === 0 ? 'bg-gray-400' : ''}">
                        Checkout & Confirm via WhatsApp
                    </button>
                </div>
            `;
            
            // Re-initialize Lucide icons
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
        }

        function renderCheckoutModal() {
            if (!checkoutModal) return;
            
            const subtotal = cart.reduce((sum, item) => sum + (cleanPrice(item.price) * (item.quantity || 0)), 0);
            const total = subtotal;
            const itemCount = cart.reduce((total, item) => total + (item.quantity || 0), 0);
            
            checkoutModal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl p-6 w-96 max-w-sm mx-4 relative">
                    <button onclick="closeCheckoutModal()" class="absolute top-4 right-4 p-1 rounded-full hover:bg-gray-100 transition">
                        <i data-lucide="x" class="w-5 h-5 text-gray-500"></i>
                    </button>
                    <h2 class="text-2xl font-bold mb-2 text-gray-800">Confirm Order</h2>
                    <p class="text-gray-600 mb-4">You'll be redirected to WhatsApp to complete your order.</p>
                    
                    <div class="bg-gray-50 rounded-lg p-4 mb-4">
                        <div class="flex justify-between text-sm mb-2">
                            <span>Items:</span>
                            <span>${itemCount}</span>
                        </div>
                        <div class="flex justify-between text-sm mb-2">
                            <span>Subtotal:</span>
                            <span>${formatINR(subtotal)}</span>
                        </div>
                        <div class="flex justify-between font-semibold border-t border-gray-200 pt-2">
                            <span>Total Amount:</span>
                            <span>${formatINR(total)}</span>
                        </div>
                    </div>
                    
                    <button onclick="proceedToWhatsApp()" 
                        class="w-full flex items-center justify-center gap-2 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition duration-300 shadow-lg">
                        <i data-lucide="message-circle" class="w-5 h-5"></i>
                        Continue to WhatsApp
                    </button>
                    
                    <p class="text-xs text-gray-500 text-center mt-3">
                        You'll confirm shipping & payment details on WhatsApp
                    </p>
                </div>
            `;
            
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
        }

        function proceedToWhatsApp() {
            if (cart.length === 0) return;

            // Collect order details
            const itemsText = cart
                .map(
                    (item, index) =>
                        `${index + 1}. ${item.title} Ã— ${item.quantity || 1} = â‚¹${cleanPrice(item.price) * (item.quantity || 1)}`
                )
                .join('%0A');

            const subtotal = cart.reduce(
                (sum, item) => sum + cleanPrice(item.price) * (item.quantity || 1),
                0
            );

            const message = `*ðŸ›’ Order Request - RoboTechnique*%0A%0AHello! I would like to order:%0A%0A${itemsText}%0A%0AðŸ’° *Subtotal:* â‚¹${subtotal}%0AðŸ“¦ *Total:* â‚¹${subtotal}%0A%0APlease confirm availability and provide payment details.`;

            const businessNumber = getWhatsAppNumber();
            const whatsappURL = `https://wa.me/${businessNumber}?text=${message}`;

            window.open(whatsappURL, '_blank');
            
            // Clear cart after order
            setTimeout(() => {
                cart = [];
                updateCartCount();
                renderCartDrawer();
                closeCheckoutModal();
            }, 1000);
        }

        // Animation and Scroll Effects
        function initScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('scroll-visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.scroll-fade-in').forEach(el => {
                observer.observe(el);
            });
        }

        function initScrollHeader() {
            if (!header) return;
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('header-scrolled');
                } else {
                    header.classList.remove('header-scrolled');
                }
            });
        }

        // Three.js Background
        function initThreeBackground() {
            const mount = document.getElementById('three-background');
            if (!mount || !window.THREE) return;

            try {
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, mount.clientWidth / mount.clientHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                
                renderer.setSize(mount.clientWidth, mount.clientHeight);
                renderer.setClearColor(0xffffff, 0);
                mount.appendChild(renderer.domElement);
                
                camera.position.z = 20;

                // Create simple particles
                const particles = new THREE.BufferGeometry();
                const particleCount = 100;
                const posArray = new Float32Array(particleCount * 3);

                for (let i = 0; i < particleCount * 3; i++) {
                    posArray[i] = (Math.random() - 0.5) * 50;
                }

                particles.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                const particleMaterial = new THREE.PointsMaterial({
                    size: 0.1,
                    color: 0x87CEEB
                });

                const particleSystem = new THREE.Points(particles, particleMaterial);
                scene.add(particleSystem);

                function animate() {
                    requestAnimationFrame(animate);
                    particleSystem.rotation.y += 0.001;
                    particleSystem.rotation.x += 0.0005;
                    renderer.render(scene, camera);
                }

                animate();

                // Handle resize
                window.addEventListener('resize', () => {
                    camera.aspect = mount.clientWidth / mount.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(mount.clientWidth, mount.clientHeight);
                });

            } catch (error) {
                console.warn('Three.js background failed to initialize:', error);
            }
        }

        // Product Detail Functions
        function openProductDetail(product) {
            if (!product) return;
            
            const modal = document.getElementById('product-detail-modal');
            const modalBody = modal.querySelector('.product-detail-body');
            
            // Get similar products (same category)
            const similarProducts = getSimilarProducts(product);
            
            // Create modal content
            modalBody.innerHTML = `
                <div class="product-detail-image-section">
                    <img src="${product.image || 'https://placehold.co/400x300/eeeeee/333333?text=Product+Image'}" 
                         alt="${product.title || 'Product'}" 
                         class="product-detail-main-image"
                         onerror="this.src='https://placehold.co/400x300/eeeeee/333333?text=Product+Image'">
                </div>
                <div class="product-detail-info-section">
                    <div class="product-detail-category">${product.category || 'General'}</div>
                    <h1 class="product-detail-title">${product.title || 'Untitled Product'}</h1>
                    <div class="product-detail-price">${formatINR(product.price)}</div>
                    <div class="product-detail-description">${product.description || 'High-quality component for your projects.'}</div>
                    
                    <div class="product-detail-actions">
                        <button class="product-detail-add-to-cart" onclick="addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')}, this)">
                            Add to Cart
                        </button>
                        <button class="product-detail-buy-now" onclick="buyNow(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                            Buy Now
                        </button>
                    </div>
                    
                    <div class="product-detail-features">
                        <h3>Product Features</h3>
                        <ul>
                            <li>High-quality materials for durability</li>
                            <li>Compatible with popular robotics platforms</li>
                            <li>Easy to integrate into existing projects</li>
                            <li>Backed by RoboTechnique quality guarantee</li>
                        </ul>
                    </div>
                </div>
            `;
            
            // Add similar products section if there are any
            if (similarProducts.length > 0) {
                const similarProductsHTML = `
                    <div class="similar-products-section">
                        <h3 class="similar-products-title">Similar Products</h3>
                        <div class="similar-products-grid">
                            ${similarProducts.map(similarProduct => `
                                <div class="similar-product-card" onclick="openProductDetail(${JSON.stringify(similarProduct).replace(/"/g, '&quot;')})">
                                    <img src="${similarProduct.image || 'https://placehold.co/400x300/eeeeee/333333?text=Product+Image'}" 
                                         alt="${similarProduct.title || 'Product'}" 
                                         class="similar-product-image"
                                         onerror="this.src='https://placehold.co/400x300/eeeeee/333333?text=Product+Image'">
                                    <h4 class="similar-product-title">${similarProduct.title || 'Untitled Product'}</h4>
                                    <div class="similar-product-price">${formatINR(similarProduct.price)}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                modalBody.insertAdjacentHTML('beforeend', similarProductsHTML);
            }
            
            // Show modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Re-initialize Lucide icons
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
        }

        function closeProductDetail() {
            const modal = document.getElementById('product-detail-modal');
            modal.classList.remove('active');
            document.body.style.overflow = 'unset';
        }

        function getSimilarProducts(product) {
            if (!product || !products || products.length === 0) return [];
            
            const currentCategory = product.category || 'General';
            return products
                .filter(p => p.id !== product.id && (p.category === currentCategory || !product.category))
                .slice(0, 4); // Return up to 4 similar products
        }
        
        function buyNow(product) {
            if (!product) return;
            
            // Add product to cart
            addToCart(product, null);
            
            // Close product detail and open checkout
            closeProductDetail();
            setTimeout(() => {
                openCheckoutModal();
            }, 300);
        }

        function updateProductCardClickEvents() {
            document.querySelectorAll('.product-card').forEach(card => {
                // Remove any existing click listeners to prevent duplicates
                card.removeEventListener('click', handleProductCardClick);
                // Add new click listener
                card.addEventListener('click', handleProductCardClick);
            });
        }

        function handleProductCardClick(event) {
            // Don't trigger if clicking on buttons or links
            if (event.target.closest('button') || event.target.closest('a')) {
                return;
            }
            
            // Find the product data
            const productCard = event.currentTarget;
            const productTitle = productCard.querySelector('.product-title')?.textContent;
            const product = products.find(p => p.title === productTitle);
            
            if (product) {
                openProductDetail(product);
            }
        }

        // Event Listeners
        function initEventListeners() {
            // Cart button
            if (cartButton) {
                cartButton.addEventListener('click', openCartDrawer);
            }
            
            // Mobile menu
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const isOpen = mobileMenu.classList.contains('h-0');
                    if (isOpen) {
                        mobileMenu.classList.remove('h-0', 'opacity-0');
                        mobileMenu.classList.add('h-auto', 'opacity-100');
                        mobileMenuButton.innerHTML = '<i data-lucide="x" class="h-6 w-6"></i>';
                    } else {
                        mobileMenu.classList.add('h-0', 'opacity-0');
                        mobileMenu.classList.remove('h-auto', 'opacity-100');
                        mobileMenuButton.innerHTML = '<i data-lucide="menu" class="h-6 w-6"></i>';
                    }
                    if (window.lucide && window.lucide.createIcons) {
                        window.lucide.createIcons();
                    }
                });
            }
            
            // Legal modal close button
            const legalModalClose = document.getElementById('legal-modal-close');
            const legalModal = document.getElementById('legal-modal');

            if (legalModalClose) {
                legalModalClose.addEventListener('click', closeLegalModal);
            }

            if (legalModal) {
                legalModal.addEventListener('click', (e) => {
                    if (e.target === legalModal) {
                        closeLegalModal();
                    }
                });
            }

            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeLegalModal();
                }
            });

            // NEW: Customer Service links click handler
            document.addEventListener('click', function(event) {
                // Check if clicked element is a Customer Service link
                if (event.target.closest('#customer-service-links a')) {
                    event.preventDefault();
                    
                    // Scroll to contact section
                    const contactSection = document.getElementById('contact');
                    if (contactSection) {
                        contactSection.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    
                    // Close mobile menu if open
                    const mobileMenu = document.getElementById('mobile-menu');
                    const mobileMenuButton = document.getElementById('mobile-menu-button');
                    if (mobileMenu && mobileMenuButton && !mobileMenu.classList.contains('h-0')) {
                        mobileMenu.classList.add('h-0', 'opacity-0');
                        mobileMenu.classList.remove('h-auto', 'opacity-100');
                        mobileMenuButton.innerHTML = '<i data-lucide="menu" class="h-6 w-6"></i>';
                        if (window.lucide && window.lucide.createIcons) {
                            window.lucide.createIcons();
                        }
                    }
                }
            });

            // Close cart when clicking overlay
            if (cartDrawer) {
                cartDrawer.addEventListener('click', (e) => {
                    if (e.target === cartDrawer) {
                        closeCartDrawer();
                    }
                });
            }

            // Close modal when clicking overlay
            if (checkoutModal) {
                checkoutModal.addEventListener('click', (e) => {
                    if (e.target === checkoutModal) {
                        closeCheckoutModal();
                    }
                });
            }

            // Product detail modal close button
            const productDetailClose = document.getElementById('product-detail-close');
            const productDetailModal = document.getElementById('product-detail-modal');
            
            if (productDetailClose) {
                productDetailClose.addEventListener('click', closeProductDetail);
            }
            
            if (productDetailModal) {
                productDetailModal.addEventListener('click', (e) => {
                    if (e.target === productDetailModal) {
                        closeProductDetail();
                    }
                });
            }
            
            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeProductDetail();
                }
            });
        }

        // FIXED: Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('DOM loaded, initializing...');
            
            // Initialize Lucide icons safely
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
            
            // Render actual content first
            renderActualContent();
            
            // Load products and settings from Supabase
            try {
                console.log('Loading products from Supabase...');
                products = await loadProductsFromSupabase();
                siteSettings = await loadSettingsFromSupabase();
                console.log(`Loaded ${products.length} products`);
            } catch (error) {
                console.error('Error loading initial data:', error);
                products = [];
                siteSettings = {};
            }
            
            // Render products after they are loaded
            renderProducts();
            
            // Initialize animations and effects
            setTimeout(() => {
                initScrollAnimations();
                initScrollHeader();
                initEventListeners();
            }, 100);
            
            // Initialize Three.js background
            setTimeout(initThreeBackground, 200);
            
            // Initialize empty cart drawer
            renderCartDrawer();
            
            // Add a fallback: re-render products after 2 seconds if still empty
            setTimeout(() => {
                if (products.length === 0 && !productsLoaded) {
                    console.log('No products loaded, attempting re-render...');
                    renderProducts();
                }
            }, 2000);
        });

        // Make functions globally available
        window.addToCart = addToCart;
        window.updateQuantity = updateQuantity;
        window.removeFromCart = removeFromCart;
        window.openCartDrawer = openCartDrawer;
        window.closeCartDrawer = closeCartDrawer;
        window.openCheckoutModal = openCheckoutModal;
        window.closeCheckoutModal = closeCheckoutModal;
        window.proceedToWhatsApp = proceedToWhatsApp;
        window.toggleTrustedSites = toggleTrustedSites;
        window.toggleReadMore = toggleReadMore;
        window.sendMail = sendMail;
        window.openProductDetail = openProductDetail;
        window.closeProductDetail = closeProductDetail;
        window.buyNow = buyNow;
        window.handleNewsletterSubscription = handleNewsletterSubscription;
        window.openLegalPage = openLegalPage;
        window.closeLegalModal = closeLegalModal;
    </script>
</body>
</html>